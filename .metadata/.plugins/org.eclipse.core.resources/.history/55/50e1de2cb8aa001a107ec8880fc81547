<%@ page contentType="text/html; charset=utf-8"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.io.*"%>
<%@ page import="java.sql.CallableStatement"%>
<%
	Connection con;
String url = "jdbc:oracle:thin:@localhost:1521:orcl";
/* 11g express edition은 orcl 대신 XE를 입력한다. */
String userid = "MYDB";
String pwd = "dongsu14";

try { /* 드라이버를 찾는 과정 */
	Class.forName("oracle.jdbc.driver.OracleDriver");
	System.out.println("드라이버 로드 성공");
} catch (ClassNotFoundException e) {
	e.printStackTrace();
}

try { /* 데이터베이스를 연결하는 과정 */
	System.out.println("데이터베이스 연결 준비 ...");
	con = DriverManager.getConnection(url, userid, pwd);
	System.out.println("데이터베이스 연결 성공");
} catch (SQLException e) {
	e.printStackTrace();
}

String query = "SELECT * FROM 상세매물"; /* SQL 문 */
try { /* 데이터베이스에 질의 결과를 가져오는 과정 */
	Statement stmt = con.createStatement();
	ResultSet rs = stmt.executeQuery(query);
	System.out.println("매물등록번호 \t등록일자 \t\t담당부동산 \t매도자명 \t주소 \t가격");
	while (rs.next()) {
		System.out.print(rs.getInt(1));
		System.out.print("\t\t" + rs.getDate(2));
		System.out.print("\t\t" + rs.getString(3));
		System.out.println("\t" + rs.getString(4));
		System.out.println("\t" + rs.getString(5));
		System.out.println("\t" + rs.getInt(6));
	}

	con.close();
} catch (SQLException e) {
	e.printStackTrace();
}
%>