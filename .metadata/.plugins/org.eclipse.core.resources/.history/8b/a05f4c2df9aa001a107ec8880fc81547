<%@ page contentType="text/html; charset=utf-8"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.io.*"%>
<%@ page import="java.sql.CallableStatement"%>
<%@ page import="java.util.*"%>
<%@ page import="java.text.DecimalFormat"%>
<%@ page import="java.text.SimpleDateFormat"%>
<%@ page import="java.util.Date"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
String query = "select 매수자_이름 from 매수자 where ID="+session.getAttribute("userID"); /* SQL 문 */
String name = "";
try { /* 데이터베이스에 질의 결과를 가져오는 과정 */
	Statement stmt = con.createStatement();
	ResultSet rs = stmt.executeQuery(query);
	while (rs.next()) {
		name = rs.getString(1);
	}

String query = "select * from 상세매물 where 매수자이름=?"+name; /* SQL 문 */
try { /* 데이터베이스에 질의 결과를 가져오는 과정 */
	Statement stmt = con.createStatement();
	ResultSet rs = stmt.executeQuery(query);
	List<String> row1 = new ArrayList<String>();
	List<String> row2 = new ArrayList<String>();
	List<Integer> row3 = new ArrayList<Integer>();
	while (rs.next()) {
		
		row2.add(rs.getString(2));
		row3.add(rs.getString(3));
		row1.add(rs.getInt(1));
	}
%>
<table border='1'>
	<tr>
		<th>매물등록번호</th>
		<th>등록일자</th>
		<th>매도자명</th>
		<th>주소</th>
		<th>가격</th>
	</tr>
	<%
		DecimalFormat formatter = new DecimalFormat("###,###");
	for (int i = 0; i < row1.size(); i++) {
		out.print("<tr>");
		out.print("<td style='text-align:center;'>" + row1.get(i) + "</td>");
		out.print("<td>" + row2.get(i).substring(0, 11) + "</td>");
		out.print("<td style='text-align:center;'>" + row3.get(i) + "</td>");
		out.print("<td>" + row4.get(i) + "</td>");
		out.print("<td>" + formatter.format(row5.get(i)) + "원" + "</td>");

		out.print("</tr>");
	}
	%>
</table>

